<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
My custom MacBook Pro [m1|m2] Provisioning | SlashDevOps
</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="How I provision my MacBook Pro [m1|m2] with my custom scripts">

<meta name="generator" content="Hugo 0.123.7">


<link rel="canonical" href="http://localhost:1313/blog/post/2022/09/17/1/my-custom-macbook-ro-m1-m2-provisioning/" >




<link href="/css/style.min.d23c1980faa61c0d6b331a0cd9dbc34fb7dade9e294067f1108fb8f26bd7796c.css" rel="stylesheet">




</head>

<body>

    <div class="flexWrapper">
        <header class="headerWrapper">
    <div class="header">
        <div>
            <a class="terminal" href="http://localhost:1313/">
                <span>christian@slashdevops.com ~ $</span>
            </a>
        </div>
        <input class="side-menu" type="checkbox" id="side-menu">
        <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>
        <nav class="headerLinks">
            <ul>
                
                <li>
                    <a href="http://localhost:1313/about" title="" >
                        ~/about</a>
                </li>
                
                <li>
                    <a href="http://localhost:1313/blog" title="" >
                        ~/blog</a>
                </li>
                
            </ul>
        </nav>
    </div>
</header>


        <div class="content">
            <main class="main">
                
<div class="postWrapper">
    <h1>My custom MacBook Pro [m1|m2] Provisioning</h1>
    
    	<p>How I provision my MacBook Pro [m1|m2] with my custom scripts</p>
    
    
    <section class="postMetadata">
        <dl>
            
            
            
            
                <dt>published</dt>
                
                <dd><time datetime="2022-09-17">September 17, 2022</time></dd>
            
            
                <dt>reading time</dt>
                <dd>3 minutes</dd>
            
        </dl>
    </section>
    
    <div>
        <h2 id="operating-system">Operating System</h2>
<h3 id="install-rosettahttpsdeveloperapplecomdocumentationapple-siliconabout-the-rosetta-translation-environment">Install <a href="https://developer.apple.com/documentation/apple-silicon/about-the-rosetta-translation-environment">Rosetta</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/usr/sbin/softwareupdate --install-rosetta --agree-to-license
</span></span></code></pre></div><h3 id="install-xcodehttpsdeveloperapplecomxcode">Install <a href="https://developer.apple.com/xcode/">Xcode</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>xcode-select --install
</span></span></code></pre></div><h2 id="package-manager">Package Manager</h2>
<h3 id="install-homebrewhttpsbrewsh">Install <a href="https://brew.sh/">Homebrew</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/bin/bash -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><h4 id="add-homebrew-to-your-path---usersuser-homezprofile">Add Homebrew to your PATH -&gt; <code>/Users/&lt;user home&gt;/.zprofile</code></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo <span style="color:#e6db74">&#39;eval $(/opt/homebrew/bin/brew shellenv)&#39;</span> &gt;&gt; /Users/$USER/.zprofile
</span></span><span style="display:flex;"><span>eval <span style="color:#66d9ef">$(</span>/opt/homebrew/bin/brew shellenv<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><h4 id="optional-updateupgrade-homebrew">(OPTIONAL) Update/upgrade Homebrew</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew update <span style="color:#f92672">&amp;&amp;</span> brew upgrade
</span></span></code></pre></div><h2 id="terminal-and-mods">Terminal and Mods</h2>
<h3 id="install-iterm2httpsiterm2com">Install <a href="https://iterm2.com/">iterm2</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install --cask iterm2
</span></span></code></pre></div><p><strong>WARNING:</strong> After this step close the default term and open iterm2</p>
<h3 id="install-oh-my-zshhttpsohmyzsh">Install <a href="https://ohmyz.sh/">Oh My Zsh</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sh -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><h3 id="optional-update-oh-my-zsh">(OPTIONAL) Update Oh My Zsh</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>omz update
</span></span></code></pre></div><h3 id="install-oh-my-zsh-useful-pluginshttpsgithubcomohmyzshohmyzshwikiplugins">Install <a href="https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins">Oh My Zsh useful plugins</a></h3>
<h4 id="list-available-plugins-on-your-local-installation">List available plugins on your local installation</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls ~/.oh-my-zsh/plugins
</span></span></code></pre></div><h4 id="configure-my-plugins">Configure my plugins</h4>
<p><strong>NOTE:</strong> my useful plugins list is in the <strong>MY_PLUGINS_LIST</strong> env var, so check it for yours</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># check it to add or remove yours</span>
</span></span><span style="display:flex;"><span>export MY_PLUGINS_LIST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;git aws golang zsh-navigation-tools brew docker docker-compose minikube kubectl ansible virtualenv python rust terraform vscode podman&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sed -i<span style="color:#e6db74">&#34;bkup&#34;</span> <span style="color:#e6db74">&#34;s/plugins\=(git)/plugins\=(</span>$MY_PLUGINS_LIST<span style="color:#e6db74">)/&#34;</span> ~/.zshrc
</span></span></code></pre></div><h4 id="install-and-configure-custom-pluginshttpsgithubcomohmyzshohmyzshwikicustomization">Install and configure <a href="https://github.com/ohmyzsh/ohmyzsh/wiki/Customization">Custom Plugins</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># zsh-syntax-highlighting</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-syntax-highlighting
</span></span><span style="display:flex;"><span>sed -i<span style="color:#e6db74">&#34;bkup&#34;</span> <span style="color:#e6db74">&#39;/plugins\=/ s/)$/ zsh-syntax-highlighting)/&#39;</span> ~/.zshrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># zsh-autosuggestions</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/zsh-users/zsh-autosuggestions <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-autosuggestions
</span></span><span style="display:flex;"><span>sed -i<span style="color:#e6db74">&#34;bkup&#34;</span> <span style="color:#e6db74">&#39;/plugins\=/ s/)$/ zsh-autosuggestions)/&#39;</span> ~/.zshrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># zsh-completions</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/zsh-users/zsh-completions <span style="color:#e6db74">${</span>ZSH_CUSTOM:=~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-completions
</span></span><span style="display:flex;"><span>sed -i<span style="color:#e6db74">&#34;bkup&#34;</span> <span style="color:#e6db74">&#39;/plugins\=/ s/)$/ zsh-completions)/&#39;</span> ~/.zshrc
</span></span></code></pre></div><h3 id="optional-configure-and-install-powerlevel10k-theme-for-zshhttpsgithubcomromkatvpowerlevel10k">(OPTIONAL) Configure and install <a href="https://github.com/romkatv/powerlevel10k">Powerlevel10k Theme for Zsh</a></h3>
<h4 id="install-powerlevel10-on-oh-my-zshhttpsgithubcomromkatvpowerlevel10koh-my-zsh">Install <a href="https://github.com/romkatv/powerlevel10k#oh-my-zsh">Powerlevel10 on Oh My Zsh</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> https://github.com/romkatv/powerlevel10k.git <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>$HOME/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/themes/powerlevel10k
</span></span></code></pre></div><h4 id="optional-update-powerlevel10khttpsgithubcomromkatvpowerlevel10kinstallation">(OPTIONAL) Update <a href="https://github.com/romkatv/powerlevel10k#installation">Powerlevel10k</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git -C <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>$HOME/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/themes/powerlevel10k pull
</span></span></code></pre></div><h4 id="configure-oh-my-zsh-to-use-powelevel10k">Configure Oh My Zsh to use Powelevel10k</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sed -i<span style="color:#e6db74">&#34;bkup&#34;</span> <span style="color:#e6db74">&#39;s/ZSH_THEME\=\&#34;robbyrussell\&#34;/ZSH_THEME\=\&#34;powerlevel10k\/powerlevel10k\&#34;/&#39;</span> ~/.zshrc
</span></span></code></pre></div><h4 id="optional-configure-powelevel10k-to-show-only-the-last-directory">(OPTIONAL) Configure Powelevel10k to show only the last directory</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>typeset -g POWERLEVEL9K_SHORTEN_STRATEGY<span style="color:#f92672">=</span>truncate_to_last
</span></span></code></pre></div><p><strong>WARNING:</strong></p>
<ul>
<li>After this step close the <strong>iterm2</strong> console</li>
<li>Once the <strong>iterm2</strong> opens, the process of customization starts, and then closes the <strong>iterm2</strong> again to begin the process of configuration of Powerlevel10k</li>
</ul>
<h3 id="configure-zsh-history">Configure Zsh history</h3>
<p>Add history configuration to file <code>~/.zshrc</code> appending it</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat &gt;&gt; ~/.zshrc <span style="color:#e6db74">&lt;&lt;_EOL_
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># History
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">HISTFILE=&#34;\$HOME/.zsh_history&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">HISTSIZE=500000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SAVEHIST=500000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt BANG_HIST                 # Treat the &#39;!&#39; character specially during expansion.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt EXTENDED_HISTORY          # Write the history file in the &#34;:start:elapsed;command&#34; format.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt INC_APPEND_HISTORY        # Write to the history file immediately, not when the shell exits.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt SHARE_HISTORY             # Share history between all sessions.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_EXPIRE_DUPS_FIRST    # Expire duplicate entries first when trimming history.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_IGNORE_DUPS          # Don&#39;t record an entry that was just recorded again.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_IGNORE_ALL_DUPS      # Delete old recorded entry if new entry is a duplicate.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_FIND_NO_DUPS         # Do not display a line previously found.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_IGNORE_SPACE         # Don&#39;t record an entry starting with a space.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_SAVE_NO_DUPS         # Don&#39;t write duplicate entries in the history file.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_REDUCE_BLANKS        # Remove superfluous blanks before recording entry.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_VERIFY               # Don&#39;t execute immediately upon history expansion.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">setopt HIST_BEEP                 # Beep when accessing nonexistent history.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># End of History
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">_EOL_</span>
</span></span></code></pre></div><p>Apply changes</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source ~/.zshrc
</span></span></code></pre></div><h2 id="ide-and-plugins">IDE and Plugins</h2>
<h3 id="install-visual-studio-codehttpscodevisualstudiocom">Install <a href="https://code.visualstudio.com/">Visual Studio Code</a></h3>
<p>Using brew cask</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install --cask visual-studio-code
</span></span></code></pre></div><h3 id="add-vscode-to-the-path">Add vscode to the PATH</h3>
<p>useful to call vscode from anywhere</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; ~/.zprofile
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># Add Visual Studio Code (code)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">export PATH=&#34;\$PATH:/Applications/Visual Studio Code.app/Contents/Resources/app/bin&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><h3 id="reload-the-terminal">Reload the terminal</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source ~/.zprofile
</span></span></code></pre></div><h3 id="install-my-default-extensions">Install my default extensions</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>code --install-extension eamodio.gitlens
</span></span><span style="display:flex;"><span>code --install-extension streetsidesoftware.code-spell-checker
</span></span><span style="display:flex;"><span>code --install-extension yzhang.markdown-all-in-one
</span></span><span style="display:flex;"><span>code --install-extension redhat.vscode-yaml
</span></span></code></pre></div><h2 id="container-management">Container Management</h2>
<h3 id="install-podmanhttpspodmaniogetting-started">Install <a href="https://podman.io/getting-started/">Podman</a></h3>
<p>Like docker but better because this is free and open source.</p>
<p>Using brew cask</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install podman
</span></span></code></pre></div><h3 id="install-podman-desktop">Install podman-desktop</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install podman-desktop
</span></span></code></pre></div><h3 id="initialize-podman-machine">Initialize podman machine</h3>
<p>This is the <a href="https://podman.io/blogs/2021/10/04/m1macs.html">container we have</a> in <strong>macos</strong> to <strong>use podman</strong> like docker does.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>podman machine init
</span></span></code></pre></div><p><strong>NOTE:</strong> good reference here <a href="https://docs.podman.io/en/latest/markdown/podman-machine-init.1.html">https://docs.podman.io/en/latest/markdown/podman-machine-init.1.html</a></p>
<h3 id="start-podman-machine">Start podman machine</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>podman machine start
</span></span></code></pre></div><p><strong>NOTE:</strong></p>
<ul>
<li>good reference here <a href="https://docs.podman.io/en/latest/markdown/podman-machine-start.1.html">https://docs.podman.io/en/latest/markdown/podman-machine-start.1.html</a></li>
<li>podman could wrapper docker, so if you don’t have docker installed just created a terminal alias in your OS.</li>
</ul>
<h3 id="optional-create-a-docker-alias-to-podman">(OPTIONAL) Create a docker alias to podman</h3>
<p>This is in case you don’t have installed <strong>docker</strong> and you want to use <strong>podman</strong> as a wrapper of this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; ~/.zshrc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># docker alias to podman
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"># remove it if you want to install docker
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">alias docker=podman
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div>
    </div>
</div>

            </main>
        </div>


        <footer class="footer">
    
        <span>© 2024 SlashDevOps, Built with <a href="https://gohugo.io" class="footerLink">Hugo</a> and <a href="https://github.com/LordMathis/hugo-theme-nightfall" class="footerLink">Nightfall</a> theme</span>
    
</footer>
    </div>

</body>

</html>